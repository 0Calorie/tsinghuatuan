<div class="details-text">

    {% if act_status == 0 %}
        <div class="timer-wrapper" id="duringbook">
        抢票正在进行中，距抢票结束还有：
        </div>
    {% elif act_status == 1 %}
        <div class="timer-wrapper" id="beforebook">
        距抢票开始还有：
        </div>
    {% else %}
        <div class="invalid-time">
        抢票已结束，感谢您的关注！
        </div>
    {% endif %}
    <div class="details-divider"></div>
    <div style="text-align: center;min-width: 300px">
        <div id="activitytimer"></div>
    </div>
    <div class="details-divider"></div>
    <div class="details-divider"></div>

    {% if act_status == 0 %}
        <div id="ticket-during-book">
            <div class="timer-wrapper">
            当前余票：(截至{{ cur_time|date:"Y年m月d日H时i分s秒" }})
            </div>
            <div class="details-divider"></div>
            <div style="text-align: center;">
                <span class="ticket">{{ act_ticket_remian }}</span>张
            </div>
        </div>
        <div class="details-divider"></div>
    {% elif act_status == 1 %}
        <div  id="ticket-before-book">
            <div class="timer-wrapper">
            活动预计发票：
            </div>
            <div style="text-align: center;">
                <span class="ticket">{{ act_totaltickets }}</span>张
            </div>
        </div>
        <div class="details-divider"></div>
    {% else %}

    {% endif %}


    <div class="timer-wrapper">
    <h7>抢票时间：</h7>
    </div>
    <div class="details-wrapper">
        <div class="text-inner">

            {% if act_bookstart.year != act_bookend.year %}
            <div class="trigger" >
                <h7>开始时间：{{ act_bookstart|date:"Y年m月d日 H时i分" }}</h7>
            </div>
            <div class="trigger">
                <h7>结束时间：{{ act_bookend|date:"Y年m月d日 H时i分" }}</h7>
            </div>
            {% elif act_bookstart.month != act_bookend.month %}
            <div class="trigger">
                <h9>{{ act_bookstart|date:"Y年m月d日 H时i分" }} 至 {{ act_bookend|date:"m月d日H时i分" }}</h9>
            </div>
            {% elif act_bookstart.day != act_bookend.day %}
            <div class="trigger">
                <h8>{{ act_bookstart|date:"Y年m月d日 H时i分" }} 至 {{ act_bookend|date:"d日H时i分" }}</h8>
            </div>
            {% else %}
            <div class="trigger">
                <h7>{{ act_bookstart|date:"Y年m月d日 H时i分" }} 至 {{ act_bookend|date:"H时i分" }}</h7>
            </div>
            {% endif %}

        </div>
    </div>
    <div class="details-divider"></div>
    <!--
    <div class="details-wrapper">
        <div class="text-inner">
            <div class="trigger">
                <a>结束时间：</a>
            </div>
        </div>
    </div>
    <div class="details-divider"></div>
    -->

    <div class="timer-wrapper">
    <h7>活动时间：</h7>
    </div>
    <div class="details-wrapper">
        <div class="text-inner">

            {% if act_begintime.year != act_endtime.year %}
            <div class="trigger" >
                <h7>开始时间：{{ act_begintime|date:"Y年m月d日 H时i分" }}</h7>
            </div>
            <div class="trigger">
                <h7>结束时间：{{ act_endtime|date:"Y年m月d日 H时i分" }}</h7>
            </div>
            {% elif act_begintime.month != act_endtime.month %}
            <div class="trigger">
                <h9>{{ act_begintime|date:"Y年m月d日 H时i分" }} 至 {{ act_endtime|date:"m月d日H时i分" }}</h9>
            </div>
            {% elif act_begintime.day != act_endtime.day %}
            <div class="trigger">
                <h8>{{ act_begintime|date:"Y年m月d日 H时i分" }} 至 {{ act_endtime|date:"d日H时i分" }}</h8>
            </div>
            {% else %}
            <div class="trigger">
                <h7>{{ act_begintime|date:"Y年m月d日 H时i分" }} 至 {{ act_endtime|date:"H时i分" }}</h7>
            </div>
            {% endif %}

        </div>
    </div>
    <div class="details-divider"></div>
    <!--
    <div class="details-wrapper">
        <div class="text-inner">
            <div class="trigger">
                <a>结束时间：</a>
            </div>
        </div>
    </div>
    <div class="details-divider"></div>
    -->
    <div class="timer-wrapper">
    <h7>活动地点：</h7>
    </div>
    <div class="details-wrapper">
        <div class="text-inner">
            <div class="trigger">
                <h7>{{ act_place }}</h7>
            </div>
        </div>
    </div>
    <div class="details-divider"></div>

    <div class="timer-wrapper">
    <h7>取票代码：</h7><!--<div class="clipcopy" id="copykey">点此复制</div>-->
    </div>
    <div class="details-wrapper">
        <div class="text-inner">
            <div class="trigger">
                <h7>{{ act_key }}   </h7>
            </div>
        </div>
    </div>
    <div class="details-divider"></div>

    <div class="timer-wrapper">
    <h7>活动详情：</h7>
    </div>
    <div class="details-wrapper" id="actabstract">
        <div class="text-inner">
            {% include 'activityphoto.html' %}
            <div class="trigger">
                <a>{{ act_abstract }}</a>
            </div>
            {% if act_text_status == 1 %}
            <div id="slidedown" class="abstract-wrapper" onclick="slidedown()">
                <div class="abstract" >
                    查看更多
                </div>
            </div>
            {% endif %}
        </div>
    </div>
    <div class="details-wrapper" id="actdetails" style="display: none">
        <div class="text-inner">
            {% include 'activityphoto.html' %}
            <div class="trigger">
                <a>{{ act_text }}</a>
            </div>
            <div id="slideup" class="abstract-wrapper" onclick="slideup()">
                <div class="abstract" >
                    收起更多
                </div>
            </div>
        </div>
    </div>
    <div class="details-divider"></div>

</div>


<script>
    var totalseconds = {{ act_seconds }};
    var actstatus = {{ act_status }};
    function CountDown()
    {
        var strtimer = '';
        if(totalseconds>0){
            var days = parseInt(totalseconds / 60 / 60 / 24, 10);
            var hours = parseInt(totalseconds  / 60 / 60 % 24, 10);
            var minutes = parseInt(totalseconds  / 60 % 60, 10);
            var seconds = parseInt(totalseconds  % 60, 10);
            days = checkFormat(days);
            hours = checkFormat(hours);
            minutes = checkFormat(minutes);
            seconds = checkFormat(seconds);
            var strtimer = '<span class="timer">'+days+'</span>天<span class="timer">'+hours+'</span>小时<span class=timer>'
                            +minutes+'</span>分<span class=timer>'+seconds+'</span>秒';
            --totalseconds;
        }
        else{
            clearInterval(timer);
            if(actstatus == 0){//from booktime to end
                strtimer = '<div class="invalid-time">抢票已结束，感谢您的关注！</div>';
                document.getElementById('duringbook').style.display  ="none";
                document.getElementById('ticket-during-book').style.display  ="none";
            }
            if(actstatus == 1){
                strtimer = '<div class="invalid-time">抢票已经开始!</div>';
                document.getElementById('beforebook').style.display  ="none";
                document.getElementById('ticket-before-book').style.display  ="none";
            }
        }
        document.getElementById('activitytimer').innerHTML = strtimer;
    }
    //compensate '0' if minutes or seconds < 10
    function checkFormat(i){
           if (i < 10) {
              i= "0" + i;
            }
            return i;
    }
    timer = setInterval("CountDown()",1000);
</script>

